---
# https://home-assistant.io/components/light/
light:
  # https://home-assistant.io/components/light.group/
  - platform: "group"
    name: "Deckenlampen Flur"
    unique_id: "afcf7f7e-b51d-4057-b877-ab5aa359bba1"
    entities:
      - "light.hue_color_lamp_1"
      - "light.hue_color_lamp_1_2"
  - platform: "group"
    name: "Wandlampen Treppenhaus"
    unique_id: "4a91ac20-7375-4787-851d-6e04193f35b7"
    entities:
      - "light.treppenhaus_wandlampe_1"
      - "light.treppenhaus_wandlampe_2"
      - "light.treppenhaus_wandlampe_3"
  - platform: "group"
    name: "all_lights"
    unique_id: "20c106e4-2562-4a79-85be-1ff341b14228"
    entities:
      # Living Room
      - "light.wohnzimmer_deckenleuchte"
      - "light.wohnzimmer_lightstrip"
      - "light.wohnzimmer_weihnachtsstern"
      - "light.wohnzimmer_weihnachtsstern_fenster"
      # Kitchen
      - "light.kuche_esstischlampe"
      - "light.kuche_herdlampe"
      - "light.kuche_weihnachtsstern_fenster"
      # Bed Room
      - "light.schlafzimmer_deckenleuchte"
      # Child Room
      - "light.kinderzimmer_deckenleuchte"
      - "light.kinderzimmer_nachttisch"
      # Bath Room
      - "light.shelly_deckenlampe_bad"
      - "light.shelly_badspiegel"
      # Office
      - "light.buro_deckenleuchte"
      - "light.buro_schreibtisch"
      # Office Cellar
      - "light.buero_keller_deckenlampe_1"
      - "light.buero_keller_deckenlampe_2"
      - "light.buero_keller_wandlampe_links"
      - "light.buero_keller_wandlampe_rechts"
      # Other
      - "light.deckenlampen_flur"
      - "light.wandlampen_treppenhaus"
      - "light.eingangstur_decke"

  # https://community.home-assistant.io/t/rounded-dashboard-guide/543043/39?u=cm000n
  #- platform: "template"
  #  lights:
  #    active_light_group_living_room:
  #      friendly_name: "Aktive Lampen Wohnzimmer"
  #      unique_id: "dde917da-cff3-46d2-98f0-27b2d2b8e042"
  #      level_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_living_room', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {% set data.numbers = [state_attr(s, "brightness")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(0)|round(0)}}
  #      value_template: >
  #        {%- set data = namespace(res="off") -%}
  #        {% for s in state_attr('group.light_group_living_room', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {%- set data.res = "on" -%}
  #          {% endif %}
  #        {%- endfor -%}
  #        {{data.res}}
  #      temperature_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_living_room', 'entity_id') %}
  #          {% if state_attr(s, "color_temp") %}
  #            {% set data.numbers = [state_attr(s, "color_temp")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(155)|round(0)}}
  #      turn_on:
  #        - service: "light.turn_on"
  #          data:
  #            entity_id: "group.light_group_living_room"
  #      turn_off:
  #        - service: "light.turn_off"
  #          data:
  #            entity_id: "group.light_group_living_room"
  #      set_level:
  #        - service: "light.turn_on"
  #          target:
  #            # was tun wenn alles aus ist? If-Anweisung, um alles einzuschalten?
  #            entity_id: "{{ expand('group.light_group_living_room') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            brightness: "{{ brightness }}"
  #      set_temperature:
  #        - service: "light.turn_on"
  #          target:
  #            entity_id: "{{ expand('group.light_group_living_room') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            color_temp: "{{ color_temp }}"
  #- platform: "template"
  #  lights:
  #    active_light_group_kitchen:
  #      friendly_name: "Aktive Lampen Küche"
  #      unique_id: "32f59805-863b-42c7-986e-713de8b1b429"
  #      level_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_kitchen', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {% set data.numbers = [state_attr(s, "brightness")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(0)|round(0)}}
  #      value_template: >
  #        {%- set data = namespace(res="off") -%}
  #        {% for s in state_attr('group.light_group_kitchen', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {%- set data.res = "on" -%}
  #          {% endif %}
  #        {%- endfor -%}
  #        {{data.res}}
  #      temperature_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_kitchen', 'entity_id') %}
  #          {% if state_attr(s, "color_temp") %}
  #            {% set data.numbers = [state_attr(s, "color_temp")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(155)|round(0)}}
  #      turn_on:
  #        - service: "light.turn_on"
  #          data:
  #            entity_id: "group.light_group_kitchen"
  #      turn_off:
  #        - service: "light.turn_off"
  #          data:
  #            entity_id: "group.light_group_kitchen"
  #      set_level:
  #        - service: "light.turn_on"
  #          target:
  #            # was tun wenn alles aus ist? If-Anweisung, um alles einzuschalten?
  #            entity_id: "{{ expand('group.light_group_kitchen') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            brightness: "{{ brightness }}"
  #      set_temperature:
  #        - service: "light.turn_on"
  #          target:
  #            entity_id: "{{ expand('group.light_group_kitchen') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            color_temp: "{{ color_temp }}"
  #- platform: "template"
  #  lights:
  #    active_light_group_bed_room:
  #      friendly_name: "Aktive Lampen Schlafzimmer"
  #      unique_id: "b7068506-61a7-4b08-b066-286b7b23d1f0"
  #      level_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_bed_room', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {% set data.numbers = [state_attr(s, "brightness")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(0)|round(0)}}
  #      value_template: >
  #        {%- set data = namespace(res="off") -%}
  #        {% for s in state_attr('group.light_group_bed_room', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {%- set data.res = "on" -%}
  #          {% endif %}
  #        {%- endfor -%}
  #        {{data.res}}
  #      temperature_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_bed_room', 'entity_id') %}
  #          {% if state_attr(s, "color_temp") %}
  #            {% set data.numbers = [state_attr(s, "color_temp")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(155)|round(0)}}
  #      turn_on:
  #        - service: "light.turn_on"
  #          data:
  #            entity_id: "group.light_group_bed_room"
  #      turn_off:
  #        - service: "light.turn_off"
  #          data:
  #            entity_id: "group.light_group_bed_room"
  #      set_level:
  #        - service: "light.turn_on"
  #          target:
  #            # was tun wenn alles aus ist? If-Anweisung, um alles einzuschalten?
  #            entity_id: "{{ expand('group.light_group_bed_room') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            brightness: "{{ brightness }}"
  #      set_temperature:
  #        - service: "light.turn_on"
  #          target:
  #            entity_id: "{{ expand('group.light_group_bed_room') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            color_temp: "{{ color_temp }}"
  #- platform: "template"
  #  lights:
  #    active_light_group_child_room:
  #      friendly_name: "Aktive Lampen Kinderzimmer"
  #      unique_id: "009b093f-c3b0-476b-97aa-d50738bed140"
  #      level_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_child_room', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {% set data.numbers = [state_attr(s, "brightness")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(0)|round(0)}}
  #      value_template: >
  #        {%- set data = namespace(res="off") -%}
  #        {% for s in state_attr('group.light_group_child_room', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {%- set data.res = "on" -%}
  #          {% endif %}
  #        {%- endfor -%}
  #        {{data.res}}
  #      temperature_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_child_room', 'entity_id') %}
  #          {% if state_attr(s, "color_temp") %}
  #            {% set data.numbers = [state_attr(s, "color_temp")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(155)|round(0)}}
  #      turn_on:
  #        - service: "light.turn_on"
  #          data:
  #            entity_id: "group.light_group_child_room"
  #      turn_off:
  #        - service: "light.turn_off"
  #          data:
  #            entity_id: "group.light_group_child_room"
  #      set_level:
  #        - service: "light.turn_on"
  #          target:
  #            # was tun wenn alles aus ist? If-Anweisung, um alles einzuschalten?
  #            entity_id: "{{ expand('group.light_group_child_room') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            brightness: "{{ brightness }}"
  #      set_temperature:
  #        - service: "light.turn_on"
  #          target:
  #            entity_id: "{{ expand('group.light_group_child_room') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            color_temp: "{{ color_temp }}"
  #- platform: "template"
  #  lights:
  #    active_light_group_office:
  #      friendly_name: "Aktive Lampen Büro"
  #      unique_id: "115fc981-c6ba-413e-ad71-45b38dfb9f87"
  #      level_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_office', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {% set data.numbers = [state_attr(s, "brightness")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(0)|round(0)}}
  #      value_template: >
  #        {%- set data = namespace(res="off") -%}
  #        {% for s in state_attr('group.light_group_office', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {%- set data.res = "on" -%}
  #          {% endif %}
  #        {%- endfor -%}
  #        {{data.res}}
  #      temperature_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_office', 'entity_id') %}
  #          {% if state_attr(s, "color_temp") %}
  #            {% set data.numbers = [state_attr(s, "color_temp")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(155)|round(0)}}
  #      turn_on:
  #        - service: "light.turn_on"
  #          data:
  #            entity_id: "group.light_group_office"
  #      turn_off:
  #        - service: "light.turn_off"
  #          data:
  #            entity_id: "group.light_group_office"
  #      set_level:
  #        - service: "light.turn_on"
  #          target:
  #            # was tun wenn alles aus ist? If-Anweisung, um alles einzuschalten?
  #            entity_id: "{{ expand('group.light_group_office') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            brightness: "{{ brightness }}"
  #      set_temperature:
  #        - service: "light.turn_on"
  #          target:
  #            entity_id: "{{ expand('group.light_group_office') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            color_temp: "{{ color_temp }}"
  #- platform: "template"
  #  lights:
  #    active_light_group_office_cellar:
  #      friendly_name: "Aktive Lampen Büro Keller"
  #      unique_id: "64dfa389-17eb-435b-80b8-5996b854127e"
  #      level_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_office_cellar', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {% set data.numbers = [state_attr(s, "brightness")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(0)|round(0)}}
  #      value_template: >
  #        {%- set data = namespace(res="off") -%}
  #        {% for s in state_attr('group.light_group_office_cellar', 'entity_id') %}
  #          {% if is_state(s, 'on') %}
  #            {%- set data.res = "on" -%}
  #          {% endif %}
  #        {%- endfor -%}
  #        {{data.res}}
  #      temperature_template: >
  #        {% set data = namespace(numbers=[]) %}
  #        {% for s in state_attr('group.light_group_office_cellar', 'entity_id') %}
  #          {% if state_attr(s, "color_temp") %}
  #            {% set data.numbers = [state_attr(s, "color_temp")] + data.numbers %}
  #          {% endif %}
  #        {% endfor %}
  #        {{data.numbers|average(155)|round(0)}}
  #      turn_on:
  #        - service: "light.turn_on"
  #          data:
  #            entity_id: "group.light_group_office_cellar"
  #      turn_off:
  #        - service: "light.turn_off"
  #          data:
  #            entity_id: "group.light_group_office_cellar"
  #      set_level:
  #        - service: "light.turn_on"
  #          target:
  #            # was tun wenn alles aus ist? If-Anweisung, um alles einzuschalten?
  #            entity_id: "{{ expand('group.light_group_office_cellar') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            brightness: "{{ brightness }}"
  #      set_temperature:
  #        - service: "light.turn_on"
  #          target:
  #            entity_id: "{{ expand('group.light_group_office_cellar') | selectattr('state','eq','on') | map(attribute='entity_id') | join(',') }}"
  #          data:
  #            color_temp: "{{ color_temp }}"

  # https://www.home-assistant.io/integrations/light.switch/
  - platform: "switch"
    name: "Shelly Deckenlampe Bad"
    entity_id: "switch.shelly_1pm_bad_deckenlampe"
  - platform: "switch"
    name: "Shelly Badspiegel"
    entity_id: "switch.shelly_1_e8db84d66665_relay_0"
  - platform: "switch"
    name: "Weihnachtsbaum"
    entity_id: "switch.lisi_nous_a1t_smartplug_1_switch"
